#!/bin/bash

# Supabase Dashboard Configuration Checker
echo "ğŸ”§ Supabase Dashboard Configuration Checklist"
echo "=============================================="
echo ""
echo "ğŸ“‹ Complete these steps in your Supabase Dashboard:"
echo ""
echo "1ï¸âƒ£ Authentication â†’ Providers â†’ Google:"
echo "   âœ“ Enable Google provider"
echo "   âœ“ Client ID: 631111437135-iuippmjn73ur1g4thacjmr5lq3k315t0.apps.googleusercontent.com"
echo "   âœ“ Client Secret: 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"
echo ""
echo "2ï¸âƒ£ Authentication â†’ URL Configuration:"
echo "   âœ“ Site URL: http://localhost:3000"
echo "   âœ“ Redirect URLs:"
echo "     - http://localhost:3000"
echo "     - http://localhost:8080"
echo "     - http://127.0.0.1:3000" 
echo "     - http://127.0.0.1:8080"
echo "     - https://xxasezacvotitccxnpaa.supabase.co/auth/v1/callback"
echo "     - com.moodtracker.app://auth"
echo ""
echo "3ï¸âƒ£ Google Cloud Console Configuration:"
echo "   ğŸŒ Web OAuth Client (631111437135-iuippmjn73ur1g4thacjmr5lq3k315t0):"
echo "   âœ“ Authorized JavaScript origins:"
echo "     - http://localhost:3000"
echo "     - http://localhost:8080"
echo "     - http://127.0.0.1:3000"
echo "     - http://127.0.0.1:8080"
echo "     - https://xxasezacvotitccxnpaa.supabase.co"
echo ""
echo "   âœ“ Authorized redirect URIs:"
echo "     - https://xxasezacvotitccxnpaa.supabase.co/auth/v1/callback"
echo "     - http://localhost:3000"
echo "     - http://localhost:8080"
echo "     - http://127.0.0.1:3000"
echo "     - http://127.0.0.1:8080"
echo ""
echo "ğŸ“± Mobile OAuth Clients:"
echo "   ğŸ¤– Android: 631111437135-76ojbi40r925em3sinj9igoel5f4do1i.apps.googleusercontent.com"
echo "   ğŸ iOS: 631111437135-5iajfi8mlc0olt9bla8tqhic6sior22j.apps.googleusercontent.com"
echo ""
echo "ğŸ§ª Test the setup:"
echo "1. Go to http://localhost:3000"
echo "2. Click 'Sign in with Google'"
echo "3. Should redirect to Google OAuth"
echo "4. After consent, should return authenticated"
echo ""
echo "â— If OAuth fails, check:"
echo "â€¢ Supabase redirect URLs match exactly"
echo "â€¢ Google Console origins/redirects are correct"
echo "â€¢ Client IDs match between Supabase and Google Console"
echo "â€¢ No typos in configuration"

# Test if Supabase is reachable
echo ""
echo "ğŸŒ Testing Supabase connectivity..."
if curl -s "https://xxasezacvotitccxnpaa.supabase.co/rest/v1/" > /dev/null; then
    echo "âœ… Supabase instance is reachable"
else
    echo "âŒ Supabase instance not reachable"
fi

echo ""
echo "ğŸ”— Useful Links:"
echo "â€¢ Supabase Dashboard: https://supabase.com/dashboard/project/xxasezacvotitccxnpaa"
echo "â€¢ Google Cloud Console: https://console.cloud.google.com/apis/credentials"
echo "â€¢ OAuth Testing: http://localhost:3000"
